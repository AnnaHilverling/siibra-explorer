<ng-container *ngIf="ngLayers$ | async | filterNgLayer : ngLayers as filteredNgLayers; else noLayerPlaceHolder">
  <ng-container *ngIf="filteredNgLayers.length > 0; else noLayerPlaceHolder">
    <div
      class="layerContainer overflow-hidden"
      *ngFor = "let ngLayer of filteredNgLayers">
    
      <!-- toggle visibility -->
      <div class="btnWrapper">
        <div
          container = "body"
          placement = "bottom"
          [tooltip] = "checkLocked(ngLayer) ? 'base layer cannot be hidden' : 'toggle visibility'"
          (click) = "checkLocked(ngLayer) ? null : toggleVisibility(ngLayer)"
          class="btn btn-sm btn-outline-secondary rounded-circle">
          <i [ngClass] = "checkLocked(ngLayer) ? 'fas fa-lock muted' :ngLayer.visible ? 'far fa-eye' : 'far fa-eye-slash'">
          </i>
        </div>
      </div>

      <!-- advanced mode only: toggle force show segmentation -->
      <div class="btnWrapper">
        <div
          *ngIf="advancedMode"
          container="body"
          placement="bottom"
          [tooltip]="ngLayer.type === 'segmentation' ? segmentationTooltip() : 'only segmentation layer can hide/show segments'"
          #forceSegment="bs-tooltip"
          (click)="forceSegment.hide();toggleForceShowSegment(ngLayer)"
          class="btn btn-sm btn-outline-secondary rounded-circle">
          <i 
            class="fas" 
            [ngClass]="ngLayer.type === 'segmentation' ? ('fa-th-large ' + segmentationAdditionalClass) : 'fa-lock muted' ">
      
          </i>
        </div>
      </div>

      <!-- remove layer -->
      <div class="btnWrapper">
        <div
          container="body"
          placement="bottom"
          [tooltip]="checkLocked(ngLayer) ? 'base layers cannot be removed' : 'remove layer'"
          (click)="removeLayer(ngLayer)"
          class="btn btn-sm btn-outline-secondary rounded-circle">
          <i [ngClass]="checkLocked(ngLayer) ? 'fas fa-lock muted' : 'far fa-times-circle'">
          </i>
        </div>
      </div>

      <!-- layer description -->
      <panel-component [ngClass]="{'muted-text muted' : !classVisible(ngLayer)}">
    
        <div heading>
          {{ ngLayer.name | getLayerNameFromDatasets : (fetchedDataEntries$ | async) }}
        </div>
    
        <div bodyy>
          {{ ngLayer.source }}
        </div>
      </panel-component>
    </div>
  </ng-container>
</ng-container>

<!-- fall back when no layers are showing -->
<ng-template #noLayerPlaceHolder>
  <h5 class="noLayerPlaceHolder text-muted">
    No additional layers added.
  </h5>
</ng-template>