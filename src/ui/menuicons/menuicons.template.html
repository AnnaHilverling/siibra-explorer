<logo-container *ngIf="!isMobile">
</logo-container>

<!-- hide icons when templates has yet been selected -->
<ng-template [ngIf]="selectedTemplate$ | async">

  <div
    [ngClass]="isMobile ? 'btnWrapper-lg' : ''"
    class="btnWrapper">
    <div
      tooltip="Layer"
      placement="right"
      (click)="clickLayer($event)"
      [ngClass]="layerbrowserIsShowing ? 'btn-primary' : 'btn-secondary'"
      class="shadow btn btn-sm rounded-circle">
      <i class="fas fa-layer-group">
        
      </i>
    </div>
  </div>

  <div
    *ngIf="false"
    [ngClass]="isMobile ? 'btnWrapper-lg' : ''"
    class="btnWrapper">
    <div
      tooltip="Plugins"
      (click)="clickPlugins($event)"
      placement="right"
      [ngClass]="pluginbrowserIsShowing ? 'btn-primary' : 'btn-secondary'"
      class="shadow btn btn-sm rounded-circle">
      <i class="fas fa-tools">
        
      </i>
    </div>
  </div>

  <div
    *ngFor="let manifest of pluginServices.fetchedPluginManifests"
    [tooltip]="manifest.displayName || manifest.name"
    placement="right"
    [ngClass]="isMobile ? 'btnWrapper-lg' : ''"
    class="btnWrapper">

    <div
      (click)="pluginServices.launchPlugin(manifest).catch(catchError)"
      [ngClass]="!pluginServices.launchedPlugins.has(manifest.name) ? 'btn-outline-secondary' : pluginServices.pluginMinimised(manifest) ? 'btn-outline-info' : 'btn-info'"
      class="shadow btn btn-sm rounded-circle">
      {{ (manifest.displayName || manifest.name).slice(0, 1) }}
    </div>
  </div>

  <div
    *ngFor="let manifest of pluginServices.orphanPlugins"
    [tooltip]="manifest.displayName || manifest.name"
    placement="right"
    [ngClass]="isMobile ? 'btnWrapper-lg' : ''"
    class="btnWrapper">

    <div
      (click)="pluginServices.launchPlugin(manifest).catch(catchError)"
      [ngClass]="pluginServices.pluginMinimised(manifest) ? 'btn-outline-info' : 'btn-info'"
      class="shadow btn btn-sm rounded-circle">
      {{ (manifest.displayName || manifest.name).slice(0, 1) }}
    </div>
  </div>

  <div
    *ngFor="let wu of dbService.instantiatedWidgetUnits"
    [ngClass]="isMobile ? 'btnWrapper-lg' : ''"
    placement="right"
    [tooltip]="wu.title"
    class="btnWrapper">
    <div
      (click)="widgetServices.minimisedWindow.delete(wu)"
      [ngClass]="widgetServices.minimisedWindow.has(wu) ? 'btn-outline-info' : 'btn-info'"
      class="shadow btn btn-sm rounded-circle">
      <i class="fas fa-search"></i>
    </div>
  </div>


  <div class="d-flex align-items-start search-menu" style="z-index: 1" #SearchMenu>

    <button mat-mini-fab style="outline: none;">
      <i class="fas fa-search"></i>
    </button>

    <div class="search-menu-panel position-absolute" style="padding-left: 50px;" >
      <search-panel
              [selectedTemplate$]="selectedTemplate$"
              [selectedParcellation$]="selectedParcellation$"
              [searchPanelPositionTop]="SearchMenu.offsetTop">
      </search-panel>
    </div>
  </div>

  <div style="z-index: 2;" class="d-flex align-items-start flex-wrap ml-n3">
    <search-panel #collapsibleSearchPanel
                  style="margin-left: -330px; z-index: 3;"
                  [ngClass]="[searchCollapsed === 1? 'slide-left' : '', searchCollapsed === 2? 'slide-right' : '']"
                  [hidden]="!searchCollapsed"
                  [selectedTemplate$]="selectedTemplate$"
            [selectedParcellation$]="selectedParcellation$"
            [searchPanelPositionTop]="+SearchMenu.offsetTop+50"
            (searchedItemsNumber)="searchedItemsNumber = $event"
            (searchLoading)="searchLoading = true">
    </search-panel>
    <button class="mat-raised-button"
            style="outline: none;"
            color="primary"
            (click)="collapseSearchBar()"
            [matBadge]="searchLoading? searchedItemsNumber : null"
            [ngClass]="[searchCollapsed === 1? 'slide-left' : '', searchCollapsed === 2? 'slide-right' : '']"
            matBadgeColor="accent">
      <i class="fas fa-search" *ngIf="!searchCollapsed"></i>
      <i class="fas" [ngClass]="searchCollapsed === 2? 'fa-chevron-left' : 'fa-chevron-right'"></i>
    </button>
  </div>

</ng-template>
