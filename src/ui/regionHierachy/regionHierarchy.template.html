<div class="input-group regionSearch">
  <input 
    #searchTermInput
    tabindex="0"
    (keydown.esc)="escape($event)"
    (focus)="showRegionTree = true"
    [value]="searchTerm"
    (input)="changeSearchTerm($event)"
    class="form-control form-control-sm"
    type="text" 
    [placeholder]="getInputPlaceholder(selectedParcellation)"/>

</div>
  
<div
  *ngIf="showRegionTree" 
  hideScrollbarContainer>

  <div treeContainer #treeContainer>
    <div treeHeader>
      <span>{{ selectedRegions.length }} {{ selectedRegions.length > 1 ? 'regions' : 'region' }} selected</span> 
      <span (click)="clearRegions($event)" *ngIf="selectedRegions.length > 0" class="btn btn-link">clear all</span>
    </div>
    
    <ng-container *ngIf="selectedParcellation && selectedParcellation.regions as regions">
      <!-- TODO deprecate flat tree component, opt for material cdk infinit scroll component -->
      <flat-tree-component
        *ngFor="let region of regions"
        [flatTreeViewPort]="treeContainer"
        (treeNodeClick)="handleClickRegion($event)"
        [inputItem]="region"
        [renderNode]="displayTreeNode.bind(this)"
        [searchFilter]="filterTreeBySearch.bind(this)">
        
      </flat-tree-component>
    </ng-container> 
  </div>
</div>