<ng-template #container>
</ng-template>

<ui-splashscreen *ngIf = "!viewerLoaded">
</ui-splashscreen>

<div landmarkMasterContainer>

  <div>
    <layout-floating-container  
      *ngIf = "spatialResultsVisible$ | async"
      pos00 
      landmarkContainer>
      <nehuba-2dlandmark-unit 
        *ngFor = "let spatialData of fetchedSpatialData"
        (mouseenter) = "handleMouseEnterLandmark(spatialData)"
        (mouseleave) = "handleMouseLeaveLandmark(spatialData)"
        [highlight] = "spatialData.highlight ? spatialData.highlight : false"
        [positionX] = "getPositionX(0,spatialData)"
        [positionY] = "getPositionY(0,spatialData)"
        [positionZ] = "getPositionZ(0,spatialData)">
      </nehuba-2dlandmark-unit>
    </layout-floating-container>
  </div>
  <div>
    <layout-floating-container  
      *ngIf = "spatialResultsVisible$ | async"
      pos01 
      landmarkContainer>
      <nehuba-2dlandmark-unit 
        *ngFor = "let spatialData of fetchedSpatialData"
        (mouseenter) = "handleMouseEnterLandmark(spatialData)"
        (mouseleave) = "handleMouseLeaveLandmark(spatialData)"
        [highlight] = "spatialData.highlight ? spatialData.highlight : false"
        [positionX] = "getPositionX(1,spatialData)"
        [positionY] = "getPositionY(1,spatialData)"
        [positionZ] = "getPositionZ(1,spatialData)">
      </nehuba-2dlandmark-unit>
    </layout-floating-container>
  </div>
  <div>
    <layout-floating-container  
      *ngIf = "spatialResultsVisible$ | async"
      pos10 
      landmarkContainer>
      <nehuba-2dlandmark-unit 
        *ngFor = "let spatialData of fetchedSpatialData"
        (mouseenter) = "handleMouseEnterLandmark(spatialData)"
        (mouseleave) = "handleMouseLeaveLandmark(spatialData)"
        [highlight] = "spatialData.highlight ? spatialData.highlight : false"
        [positionX] = "getPositionX(2,spatialData)"
        [positionY] = "getPositionY(2,spatialData)"
        [positionZ] = "getPositionZ(2,spatialData)">
      </nehuba-2dlandmark-unit>
    </layout-floating-container>
  </div>
  <div>
    <layout-floating-container  
      pos11 
      landmarkContainer>
    </layout-floating-container>
  </div>
</div>

<layout-floating-container
  *ngIf = "viewerLoaded">
  <div statusCard>

    <!-- perhaps use a dedicated publication card next time (?) -->
    <div
      *ngIf = "showCitation"
      citationContainer>
      <a
        *ngFor = "let publication of selectedTemplate.properties.publications" 
        href = "{{ publication.doi }}" 
        class = "btn btn-link">
        {{ publication.citation }}
      </a>
    </div>

    <hr />

    <span 
      class = "btn btn-link"
      (click)="statusPanelRealSpace = !statusPanelRealSpace">
      {{statusPanelRealSpace ? 'RealSpace' : 'VoxelSpace'}}
    </span>

    <span
      (click) = "resetNavigation()"
      class = "btn btn-link">
      reset navigation
    </span>
  
    <br />
    <div textContainer>
      <small>Navigation: </small>
        <input 
          (keydown.enter) = "textNavigateTo(navigateInput.value)"
          (keydown.tab) = "textNavigateTo(navigateInput.value)"
          [ngModel] = "navigationValue()" 
          spellcheck = "false"
          #navigateInput
          navigateInput/>
    
      <br />
      <small>Mouse: </small>
      <small>
        {{ mouseCoord }}
      </small> 
      <br />
      <small onHoverSegment>
        {{ onHoverSegmentName$ | async }}
      </small>
    </div>
  </div>
</layout-floating-container>