<div *ngIf = "meetsRequirement" class = "atlas-container" helpdirective>

  <ui-nehuba-container (contextmenu)="nehubaClickHandler($event)">
  </ui-nehuba-container>

  <div bannerWrapper>
    <menu-icons iconWrapper>
    </menu-icons>
    <signin-banner signinWrapper>
    </signin-banner>
  </div>

  <layout-floating-container
    zIndex = "9"
    #floatingOverlayContainer>
    <div floatingContainerDirective>

    </div>
    
    <panel-component class="shadow" fixedMouseContextualContainerDirective #rClContextMenu>
      <div heading>
        <h5 class="pe-all p-2 m-0">
          What's here?
        </h5>
      </div>
      <div body>
        <div
          *ngIf="onhoverSegmentForFixed$ | async; let onhoverSegmentFixed"
          (click)="searchRegion([onhoverSegmentFixed])"
          class="ws-no-wrap text-left pe-all btn btn-sm btn-secondary btn-block">
          Search KG for {{ onhoverSegmentFixed.name }}
        </div>

        <div
          *ngIf="selectedRegions$ | async; let selectedRegions"
          (click)="searchRegion(selectedRegions)"
          class="ws-no-wrap text-left pe-all mt-0 btn btn-sm btn-secondary btn-block">
          Search KG for {{ selectedRegions && selectedRegions.length }} selected regions
        </div>

        <ng-template #noRegionSelected>
          <div
            (click)="searchRegion()"
            class="ws-no-wrap text-left pe-all mt-0 btn btn-sm btn-secondary btn-block">
            No region selected. Search KG for all datasets in this template space.
          </div>
        </ng-template>

      </div>
    </panel-component>
    
    <div floatingMouseContextualContainer floatingMouseContextualContainerDirective>
      <div 
        *ngIf="onhoverLandmark$ | async" 
        contextualBlock>
        {{ onhoverLandmark$ | async }} <i><small class = "mute-text">{{ toggleMessage }}</small></i>
      </div>
      <div 
        *ngIf="onhoverSegment$ | async; let onhoverSegment" 
        contextualBlock>
        {{ onhoverSegment.name }} <i><small class = "mute-text">{{ toggleMessage }}</small></i>
      </div>
      <!-- TODO Potentially implementing plugin contextual info -->
    </div>

    <div toastContainer>
      <div toastDirective>
      </div>
    </div>
  </layout-floating-container>

  <div pluginFactoryDirective>
  </div>

</div>

<ng-template #helpComponent>
  <help-component>
  </help-component>
</ng-template>
<ng-template #viewerConfigComponent>
  <config-component>
  </config-component>
</ng-template>
<ng-template #signinModalComponent>
  <signin-modal>
    
  </signin-modal>
</ng-template>

<markdown-dom minReqMd *ngIf = "!meetsRequirement" [markdown] = "constantsService.minReqMD" >
</markdown-dom>
