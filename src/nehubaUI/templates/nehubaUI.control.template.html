<div id = "leftSide">
    <div (scroll)="onScroll($event)" id = "leftSideTop" class = "leftSideSubSection" [ngClass]="{darktheme:darktheme}">
        <div class = "modePanel" [ngClass]="{darktheme : darktheme}">
            <button (click)="templatesPanelIsShown = !templatesPanelIsShown" class = "btn btn-default btn-block btn-lg">
                <span class = "glyphicon" [ngClass]="templatesPanelIsShown ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span> 
                Templates <small *ngIf = "selectedTemplate">({{selectedTemplate.name}})</small>
            </button>
            <div class = "list-group" *ngIf="fetchedTemplatesData" [hidden]="!templatesPanelIsShown" >
                <div *ngFor = "let template of fetchedTemplatesData.templates" (click)="chooseTemplate(template)" class = "list-group-item" [ngClass]="{active : template === selectedTemplate}" >
                    <span class = "list-group-item-name">
                        {{template.name}}
                    </span>
                    <span *ngIf = "!(template.properties | isEmpty)" class = "list-group-item-icon" (click) = "showMoreInfo(template);$event.stopPropagation()"  >
                        <span class = "glyphicon glyphicon-info-sign"></span>
                    </span>
                </div>
            </div>
            <button class = "btn btn-default btn-block btn-lg" (click)="parcellationsPanelIsShown = !parcellationsPanelIsShown" [ngClass]="{inactive: selectedTemplate == undefined}">
                <span *ngIf = "!selectedTemplate" class = "glyphicon glyphicon-chevron-right"></span>
                <span *ngIf = "selectedTemplate" class = "glyphicon" [ngClass]="parcellationsPanelIsShown ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span> 
                Parcellations <small *ngIf = "selectedParcellation">({{selectedParcellation.name}})</small>
            </button>
            <div class = "list-group" *ngIf="selectedTemplate" [hidden]="!parcellationsPanelIsShown" >
                <div *ngFor = "let parcellation of selectedTemplate.parcellations">
                    <div (click)="chooseParcellation(parcellation)" class = "list-group-item" [ngClass]="{active : parcellation == selectedParcellation} " >
                        <span [ngClass] = "{'text-muted' : !parcellation.isShown}" class = "list-group-item-name">
                            {{ parcellation.name }}   
                        </span>
                        <span *ngIf = "!(parcellation.properties | isEmpty)" class = "list-group-item-icon unicodeSymbols" (click) = "showMoreInfo(parcellation);$event.stopPropagation()"  >
                            <span class = "glyphicon glyphicon-info-sign"></span>
                        </span>
                    </div>
                </div>
            </div>
            <button class = "btn btn-default btn-block btn-lg" (click)="regionsPanelIsShown = !regionsPanelIsShown" [ngClass]="{inactive: selectedParcellation == undefined}">
                <span *ngIf = "!selectedParcellation" class = "glyphicon glyphicon-chevron-right"></span>
                <span *ngIf = "selectedParcellation" class = "glyphicon" [ngClass]="regionsPanelIsShown ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span> 
                Regions <small *ngIf = "selectedParcellation && ( selectedParcellation.regions | selectTreePipe ).length>0">({{( selectedParcellation.regions | selectTreePipe ).length}})</small>
            </button>
            <div class = "list-group" *ngIf="selectedParcellation" [hidden]="!regionsPanelIsShown">
                <div class = "list-group-item nohover">
                    <input class = "form-control" placeholder = "Search regions ... "  [ngModel]="searchTerm" (ngModelChange)="multilvlExpansionTreeShake($event)" name = "searchRegionInput" #ctrl="ngModel">
                </div>
                <div (click)="refreshSelectedRegions()" class = "list-group-item nohover">
                    <multilevel class = "menuItemContentText" [data]="selectedParcellation.regions | searchTreePipe : searchTerm" [searchTerm]="searchTerm">
                    </multilevel>
                </div>
            </div>
            <!-- <div (click)="refreshSelectedRegions()" class = "list-group" *ngIf="selectedParcellation && (selectedParcellation.regions | selectTreePipe).length > 0" [hidden]="defaultPanelsState.regionsPanelState">
                <div class = "multiSelectPills" *ngFor = "let region of (selectedParcellation.regions | selectTreePipe)">
                    {{region.name}}
                    <span class = "unicodeSymbols" (click) = "region.enabled = false">&times;</span>
                </div>
            </div> -->
            <button *ngIf = "true" class = "btn btn-default btn-block btn-lg" (click)="pluginsPanelIsShown = !pluginsPanelIsShown">
                    <span class = "glyphicon" [ngClass]="pluginsPanelIsShown ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span> 
                    Tools
            </button>
            <div *ngIf = "true" class = "list-group" [hidden]="!pluginsPanelIsShown">
                <div class = "list-group-item nohover">
                    <lab>
                    </lab>
                </div>
            </div>
        </div>
    </div>
</div>